{% extends "base.html" %}
{% load static %}

{% block head %}
<link href="{% static 'css/bloglist.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<main style="margin-top: 150px;">
  <!-- Page Title -->
  <div class="page-title" data-aos="fade">
    <div class="heading">
      <div class="container">
        <div class="row d-flex justify-content-center text-center">
          <div class="col-lg-8">
            <h1>EUNOIANEST 수면 NEWS</h1>
            <p class="mb-0 noto-sans-kr-main">
              다양한 뉴스와 연구를 통해 수면에 관한 흥미로운 이야기를 만나보세요!
              <br>최신 정보로 여러분의 수면 건강을 개선해 보세요.</p>
          </div>
        </div>
      </div>
    </div>
    <nav class="breadcrumbs" style="margin-top: 70px;">
      <div class="container">
        <br>
      </div>
    </nav>
  </div><!-- End Page Title -->

  <!-- Blog Posts Section -->
  <section id="blog-posts" class="blog-posts section">
    <div class="container">
      <div class="row gy-4">

        {% for p in page_obj %}
          <div class="col-lg-4">
            <article>
              <div class="post-img">
                {% if p.head_image %}
                  <img src="{{ p.head_image.url }}" alt="{{ p }} head image" class="card-img-top">
                {% else %}
                  <img class="card-img-top" src="https://picsum.photos/seed/{{ p.id }}/800/500" alt="random_image">
                {% endif %}
              </div>

              <p class="post-category">{{ p.category }}</p>

              <h2 class="title">
                <a href="{{ p.get_absolute_url }}">{{ p.title }}</a>
              </h2>

              <div class="d-flex align-items-center">
                <img src="{{ p.author.image_url }}" alt="" class="img-fluid post-author-img flex-shrink-0">
                <div class="post-meta">
                  <p class="post-author">{{ p.author.name }}</p>
                  <p class="post-date">
                    <time datetime="{{ p.created_at|date:"Y-m-d" }}">{{p.id}}번째 이야기 | {{ p.created_at|date:"Y년 n월 j일" }}</time>
                  </p>
                </div>
              </div>
            </article>
          </div><!-- End post list item -->
        {% endfor %}

      </div>
    </div>
  </section><!-- /Blog Posts Section -->

  <!-- Pagination Section -->
  <section id="pagination" class="pagination section">
    <div class="container">
      <div class="d-flex justify-content-center">
        <ul class="pagination">
          {% if page_obj.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?page=1">First</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
            </li>
          {% endif %}

          {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
              <li class="page-item active">
                <a class="page-link" href="#">{{ num }}</a>
              </li>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
              <li class="page-item">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
              </li>
            {% endif %}
          {% endfor %}

          {% if page_obj.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
            </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </section>

</main>
{% endblock %}
